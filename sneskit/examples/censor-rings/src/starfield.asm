;-------------------------------------------------------------------------;
.include "snes.inc"
.include "starfield.inc"
;-------------------------------------------------------------------------;


;/////////////////////////////////////////////////////////////////////////;
.code
;/////////////////////////////////////////////////////////////////////////;


;-------------------------------------------------------------------------;
	.a8
	.i8
;-------------------------------------------------------------------------;


;:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::;
SetupStarField:
;:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::;
	stz	REG_BG4VOFS
	stz	REG_BG4VOFS

	ldx	#01h
;-------------------------------------------------------------------------;
:	lda	LIST_BG4HOFS,x
	sta	RAM_BG4HOFS,x
	sta	RAM_BG4HOFS+0ffh,x
	inx
	stz	RAM_BG4HOFS,x
	stz	RAM_BG4HOFS+0ffh,x
	inx
	cpx	#0ffh
	bne	:-
;-------------------------------------------------------------------------;
	stx	RAM_BG4HOFS
	lda	#0e1h
	sta	RAM_BG4HOFS+0ffh

	rts


;:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::;
StarField:
;:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::;
	ldx	#01h
;-------------------------------------------------------------------------;
:	inx
	inx
	lda	RAM_BG4HOFS,x
	clc
	adc	#02h
	sta	RAM_BG4HOFS,x
	inx
	inx
	inx
	inx
	lda	RAM_BG4HOFS,x
	clc
	adc	#02h
	sta	RAM_BG4HOFS,x
	inx
	inx
	inx
	inx
	inx
	inx
	lda	RAM_BG4HOFS,x
	clc
	adc	#03h
	sta	RAM_BG4HOFS,x
	inx
	inx
	lda	RAM_BG4HOFS,x
	clc
	adc	#01h
	sta	RAM_BG4HOFS,x
	inx
	inx
	cpx	#01h
	bne	:-
;-------------------------------------------------------------------------;
	lda	#0e1h
	sta	RAM_BG4HOFS+0ffh
	ldx	#01h
;-------------------------------------------------------------------------;
:	lda	RAM_BG4HOFS+0ffh,x
	clc
	adc	#01h
	sta	RAM_BG4HOFS+0ffh,x
	inx
	inx
	inx
	inx
	lda	RAM_BG4HOFS+0ffh,x
	clc
	adc	#02h
	sta	RAM_BG4HOFS+0ffh,x
	inx
	inx
	inx
	inx
	lda	RAM_BG4HOFS+0ffh,x
	clc
	adc	#02h
	sta	RAM_BG4HOFS+0ffh,x
	inx
	inx
	inx
	inx
	inx
	inx
	lda	RAM_BG4HOFS+0ffh,x
	clc
	adc	#03h
	sta	RAM_BG4HOFS+0ffh,x
	inx
	inx
	cpx	#0d1h
	bne	:-
	rts


;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=;
LIST_BG4HOFS:
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=;
	.byte	$a7,$de,$bb,$cd,$13,$7e,$74,$1b
	.byte	$f3,$b4,$88,$f9,$52,$f5,$ef,$89
	.byte	$90,$ac,$b4,$be,$ab,$74,$56,$28
	.byte	$bc,$8b,$6d,$0e,$c5,$83,$90,$be
	.byte	$a9,$3b,$77,$21,$7c,$0e,$5d,$92
	.byte	$fd,$4a,$a8,$f0,$61,$e4,$cc,$f2
	.byte	$53,$6a,$6d,$bb,$38,$38,$c4,$af
	.byte	$b7,$ef,$43,$84,$79,$23,$7c,$9c
	.byte	$2d,$54,$3f,$92,$d0,$20,$02,$13
	.byte	$2b,$b6,$86,$ef,$9d,$8e,$b8,$6f
	.byte	$1a,$58,$d6,$ea,$74,$32,$d2,$93
	.byte	$d9,$1d,$fb,$95,$9e,$b2,$da,$62
	.byte	$3a,$11,$5a,$47,$96,$1b,$2d,$45
	.byte	$84,$e1,$6a,$1c,$8c,$5b,$7b,$a8
	.byte	$ef,$5e,$36,$70,$e6,$c8,$4a,$7d
	.byte	$2b,$fe,$dd,$68,$ba,$98,$73,$b7
	.byte	$d9,$5a,$12,$6a,$56,$66,$a4,$d0
	.byte	$10,$b1,$9c,$9f,$b8,$b4,$dc,$44
	.byte	$d9,$64,$d6,$78,$16,$63,$f2,$14
	.byte	$b4,$78,$30,$26,$58,$3d,$0f,$44
	.byte	$11,$17,$ad,$20,$98,$6b,$2f,$5d
	.byte	$d7,$0f,$63,$a1,$a9,$ff,$a4,$ec
	.byte	$e1,$52,$ff,$28,$8d,$6c,$94,$01
	.byte	$7c,$74,$3e,$f6,$fd,$09,$76,$b0
	.byte	$ea,$30,$74,$93,$e5,$91,$98,$94
	.byte	$e2,$e4,$09,$4a,$e6,$a6,$9c,$47
	.byte	$0d,$10,$f7,$a8,$d2,$49,$f6,$eb
	.byte	$8b,$db,$4d,$01,$33,$64,$6f,$a4
	.byte	$6c,$8e,$af,$eb,$c4,$40,$a5,$1c
	.byte	$38,$16,$d4,$c1,$f7,$0f,$89,$fe
	.byte	$68,$86,$06,$21,$6d,$64,$e0,$7b
	.byte	$ea,$93,$a6,$6f,$81,$b6,$c3,$00
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=;
